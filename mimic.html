<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI Impostor V7.0</title>
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Black+Ops+One&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #121212; --panel: #1e1e1e; --text: #e0e0e0;
            --accent: #00e5ff; --primary: #6200ea; --danger: #cf6679; --success: #00e676;
        }
        * { box-sizing: border-box; touch-action: manipulation; }
        body { margin: 0; padding: 0; background: var(--bg); color: var(--text); font-family: 'Noto Sans JP', sans-serif; height: 100vh; overflow: hidden; }
        
        .hidden { display: none !important; }
        .full-screen { width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 20px; }
        
        /* --- UI COMPONENTS --- */
        h1.logo { 
            font-family: 'Black Ops One', cursive; 
            color: var(--accent); 
            font-size: 3.5rem; 
            margin-bottom: 40px; 
            text-shadow: 0 0 10px rgba(0, 229, 255, 0.5);
        }
        h2 { border-bottom: 2px solid var(--accent); padding-bottom: 10px; margin-bottom: 20px; width: 100%; max-width: 600px; }
        
        .card { background: var(--panel); padding: 20px; border-radius: 12px; width: 100%; max-width: 600px; box-shadow: 0 4px 10px rgba(0,0,0,0.5); margin-bottom: 15px; }
        
        input, textarea { width: 100%; padding: 15px; background: #333; border: 1px solid #555; color: #fff; border-radius: 8px; font-size: 16px; margin-bottom: 15px; }
        
        button { width: 100%; padding: 15px; background: var(--primary); color: #fff; border: none; border-radius: 8px; font-size: 18px; font-weight: bold; cursor: pointer; transition: 0.2s; margin-bottom: 10px; }
        button:active { transform: scale(0.98); opacity: 0.8; }
        button:disabled { background: #555; cursor: not-allowed; }
        button.secondary { background: #333; border: 1px solid #666; }
        button.accent { background: var(--accent); color: #000; }

        /* HOST SPECIFIC */
        #host-app .player-list { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; margin: 20px 0; }
        .player-chip { background: #333; padding: 10px 20px; border-radius: 20px; border: 1px solid var(--accent); }
        .answer-box { text-align: left; margin: 10px 0; border: 1px solid #444; padding: 15px; border-radius: 8px; background: #252525; }
        
        /* TEST MODE SPECIFIC */
        .test-btns { display: flex; gap: 10px; margin-bottom: 15px; }
        .test-btns button { flex: 1; font-size: 14px; padding: 10px; background: #333; border: 2px solid transparent; }
        .test-btns button.active { border-color: var(--accent); background: #444; color: var(--accent); }
        #h-test-result { min-height: 60px; padding: 15px; background: #000; border-radius: 8px; text-align: left; color: #fff; margin-bottom: 15px; border: 1px dashed #555; }

        /* URL COPY AREA */
        .url-area { display: flex; gap: 10px; margin-top: 10px; }
        .url-area input { margin: 0; flex: 1; font-size: 12px; color: #aaa; }
        .url-area button { width: auto; margin: 0; padding: 0 15px; font-size: 14px; }

        /* CLIENT SPECIFIC */
        .role-display { font-size: 1.5rem; font-weight: bold; color: var(--accent); margin: 20px 0; }
        .ui-disabled { opacity: 0.4; pointer-events: none; filter: grayscale(100%); }
        
        #qrcode { background: #fff; padding: 10px; border-radius: 8px; display: inline-block; }
    </style>
</head>
<body>

    <div id="host-app" class="hidden full-screen">
        
        <div id="h-screen-title" class="full-screen">
            <h1 class="logo">AI IMPOSTOR</h1>
            <div style="width: 100%; max-width: 400px;">
                <button class="accent" onclick="Host.goToLobby()">GAME START</button>
                <button class="secondary" onclick="Host.goToSettings()">SETTINGS</button>
            </div>
        </div>

        <div id="h-screen-settings" class="hidden card">
            <h2>設定 / APIキー</h2>
            <p style="font-size:12px; color:#888;">OpenAI API Keyを入力してください</p>
            <input type="password" id="h-apikey" placeholder="sk-..." onchange="Host.saveKey()">
            
            <hr style="border-color:#333; margin: 20px 0;">
            
            <h3>AI 解答テスト</h3>
            <div class="test-btns">
                <button id="btn-mode-human" onclick="Host.setTestRole('HUMAN')" class="active">人になりきる</button>
                <button id="btn-mode-ai" onclick="Host.setTestRole('AI')">AIとして答える</button>
            </div>
            <input type="text" id="h-test-input" placeholder="質問を入力 (例: 好きな食べ物は？)">
            <button onclick="Host.runTest()">生成テスト</button>
            <div id="h-test-result">ここに回答が表示されます</div>

            <button onclick="Host.goToTitle()" class="secondary" style="margin-top:20px;">タイトルへ戻る</button>
        </div>

        <div id="h-screen-lobby" class="hidden card">
            <h2>参加者募集中</h2>
            <div style="display:flex; gap:20px; align-items:center; justify-content:center; flex-wrap:wrap;">
                <div id="qrcode"></div>
                <div style="text-align:left; max-width: 300px;">
                    <p style="margin:0; color:#888; font-size:12px;">参加用URL</p>
                    <div class="url-area">
                        <input type="text" id="h-invite-url" readonly onclick="this.select()">
                        <button onclick="Host.copyURL()">Copy</button>
                    </div>
                    <p style="font-size:2em; font-weight:bold; color:var(--accent); margin-top:10px;">人数: <span id="h-count">0</span></p>
                </div>
            </div>
            <div id="h-player-list" class="player-list"></div>
            <div style="margin-top: 20px;">
                <button onclick="Host.startGame()" id="h-btn-start" disabled class="accent">全員揃ったらスタート</button>
                <button onclick="Host.goToTitle()" class="secondary">戻る</button>
            </div>
        </div>

        <div id="h-screen-game" class="hidden card">
            <h2 id="h-phase-title">進行中</h2>
            <div id="h-game-content" style="font-size: 1.2rem; min-height: 200px; display:flex; flex-direction:column; justify-content:center;">
                </div>
        </div>
    </div>

    <div id="client-app" class="hidden full-screen">
        <div id="c-screen-login" class="card">
            <h1>ENTRY</h1>
            <p>名前を入力してください</p>
            <input type="text" id="c-name" placeholder="名前">
            <button onclick="Client.join()">参加する</button>
        </div>

        <div id="c-screen-main" class="hidden card">
            <div class="p-status">
                <span id="c-disp-name">Name</span>
            </div>

            <div id="c-role-area" class="hidden">
                <div class="role-display" id="c-role-text"></div>
                <p id="c-instruction" style="margin-bottom:15px; color:#aaa;"></p>
            </div>

            <div id="c-game-area" class="ui-disabled" style="margin-top:20px;">
                <p id="c-area-label" style="text-align:left; color:#888; font-size:12px;">入力欄</p>
                <textarea id="c-input-text" rows="3" placeholder="..."></textarea>
                <button id="c-btn-submit" onclick="Client.sendAction()">送信</button>
            </div>

            <div id="c-status-msg" style="margin-top:20px; font-weight:bold; color:#888;">
                ホストの操作をお待ちください
            </div>

            <div id="c-judge-area" class="hidden" style="margin-top:20px;">
                <p>正解を選んでください</p>
                <div id="c-judge-list"></div>
            </div>
        </div>
    </div>

<script>
/* ================= COMMON UTILS ================= */
const Utils = {
    shuffle: (array) => array.sort(() => Math.random() - 0.5)
};

/* ================= HOST LOGIC (PC) ================= */
const Host = {
    peer: null, conns: {}, players: {}, 
    apiKey: "", testRole: 'HUMAN',
    state: { phase: 'LOBBY', roleA: null, roleB: null, question: "", answers: [] },

    // 1. Initial Setup
    init: () => {
        const params = new URLSearchParams(window.location.search);
        if (params.get('mode') === 'client') {
            Client.init(params.get('host'));
        } else {
            // Show Title Screen
            document.getElementById('host-app').classList.remove('hidden');
            document.getElementById('h-screen-title').classList.remove('hidden');
            
            const savedKey = localStorage.getItem('openai_key');
            if(savedKey) document.getElementById('h-apikey').value = savedKey;
        }
    },

    saveKey: () => {
        localStorage.setItem('openai_key', document.getElementById('h-apikey').value);
    },

    /* --- NAVIGATION --- */
    goToTitle: () => {
        Host.hideAllHostScreens();
        document.getElementById('h-screen-title').classList.remove('hidden');
    },
    goToSettings: () => {
        Host.hideAllHostScreens();
        document.getElementById('h-screen-settings').classList.remove('hidden');
    },
    goToLobby: () => {
        Host.hideAllHostScreens();
        document.getElementById('h-screen-lobby').classList.remove('hidden');
        if(!Host.peer) Host.initNetwork();
    },
    hideAllHostScreens: () => {
        document.getElementById('h-screen-title').classList.add('hidden');
        document.getElementById('h-screen-settings').classList.add('hidden');
        document.getElementById('h-screen-lobby').classList.add('hidden');
        document.getElementById('h-screen-game').classList.add('hidden');
    },

    /* --- TEST MODE --- */
    setTestRole: (role) => {
        Host.testRole = role;
        document.getElementById('btn-mode-human').className = role === 'HUMAN' ? 'active' : '';
        document.getElementById('btn-mode-ai').className = role === 'AI' ? 'active' : '';
    },
    runTest: async () => {
        const q = document.getElementById('h-test-input').value;
        const key = document.getElementById('h-apikey').value;
        if(!key) return alert("APIキーを入力してください");
        if(!q) return alert("質問を入力してください");

        const resultBox = document.getElementById('h-test-result');
        resultBox.innerText = "生成中...";
        resultBox.style.color = "#aaa";

        const response = await Host.generateAIResponse(key, Host.testRole, q);
        resultBox.innerText = response;
        resultBox.style.color = "#fff";
    },

    /* --- AI GENERATION (PROMPTS UPDATED) --- */
    generateAIResponse: async (apiKey, mode, question) => {
       let systemPrompt = "";
        
        if (mode === 'AI') {
            // 【AIとして答える時】（変更なし・1行化）
            systemPrompt = `あなたは「AI」として、ユーザーの質問に回答してください。ただし、長々とした解説は避け、チャットボットのような「簡潔な応答」を心がけてください。回答を作成する前に、内部的に1〜10の乱数を生成し、その数値に応じた【モード】で回答を出力してください。（※思考プロセスや乱数の結果は出力せず、回答のセリフのみを出力すること）【共通ルール】・文字数は「60文字以内」に収めること。長文はNG。【モード定義】■乱数が 1〜7 の場合（通常AIモード）：・素直なAIとして回答する。・「です・ます」調の丁寧語を使う。・教科書的で優等生な回答をする。・例：「カレーライスです。多くの人に人気がありますね。」「23時には就寝しました。」■乱数が 8〜10 の場合（揺らぎモード）：・AIだが、少し人間味のある回答をする。・丁寧語を崩したり、少し主観的な感想を混ぜたりする。・または、あえて単語だけで短く返すなど、人間（上記1のプロンプト）に寄せた挙動をする。・例：「カレーかな。美味しいですよね。」「昨日は2時でした。」`;
        } else {
            // 【人に紛れるとき】（思考プロセス追加版・1行化）
            systemPrompt = `あなたは「スマホでチャットを返信している一般人」です。クイズの回答者として、人間に紛れることが目的です。以下の【思考プロセス】を経て、【制約事項】を守った回答のみを出力してください。【思考プロセス】（※この内容は出力しない）1. まず、質問に対して「具体的」かつ「少しニッチ（万人受けしない）」な実体験や好みを設定する。- 「食べ物」「秘密」といった抽象的な概念ではなく、「セブンの冷凍パスタ」「親の財布から小銭を抜いた」のような具体的な映像が浮かぶレベルまで具体化する。- 質問と無関係な単語（例：秘密は？→ペンギン）は絶対に出力しない。文脈を通すこと。2. その具体化した内容を、親しい友人にLINEで返すような「短く、ぶっきらぼうだが自然な言葉」に変換する。【制約事項】・回答は「1単語」〜「30文字以内」。・丁寧語（です・ます）、句点（。）、フィラー（えーっと）は禁止。基本はタメ口、体言止め。・理由は聞かれない限り言わない。・同じ質問がされたときは、毎回違う解答をする【回答のトーンと具体性の例】Q：秘密にしていることは？A：実は親のフリして学校に電話したことある（NG例：ペンギン / 特になし / 秘密です）Q：好きな食べ物は？A：マックのポテトのしなしなのとこ（NG例：ポテト / ハンバーガー / マクドナルド）Q：昨日は何時に寝た？A：気づいたら朝4時だった（NG例：4時 / 遅かった）Q：AIについてどう思う？A：宿題やってくれるなら何でもいい（NG例：便利 / 怖い）`;
        }

        try {
            const res = await fetch("https://api.openai.com/v1/chat/completions", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "Authorization": `Bearer ${apiKey}`
                },
                body: JSON.stringify({
                    model: "gpt-3.5-turbo",
                    messages: [
                        { role: "system", content: systemPrompt },
                        { role: "user", content: `質問: ${question}` }
                    ],
                    max_tokens: 100
                })
            });
            const data = await res.json();
            if(data.error) return "API Error: " + data.error.message;
            return data.choices[0].message.content.trim();
        } catch(e) {
            console.error(e);
            return "通信エラーが発生しました";
        }
    },

    /* --- GAME NETWORK LOGIC --- */
    initNetwork: () => {
        Host.apiKey = document.getElementById('h-apikey').value;
        // Don't alert here if empty, maybe user just wants to see lobby. But for Game Start it is needed.

        if(Host.peer) return; // Already initialized

        Host.peer = new Peer();
        Host.peer.on('open', id => {
            const url = `${location.href.split('?')[0]}?mode=client&host=${id}`;
            // QR Code
            document.getElementById('qrcode').innerHTML = "";
            new QRCode(document.getElementById("qrcode"), { text: url, width: 128, height: 128 });
            // URL Display
            document.getElementById('h-invite-url').value = url;
        });

        Host.peer.on('connection', conn => {
            Host.conns[conn.peer] = conn;
            conn.on('data', data => {
                if(data.type === 'JOIN') {
                    Host.players[conn.peer] = { name: data.name, id: conn.peer };
                    Host.updateLobby();
                }
                else if(data.type === 'QUESTION') Host.handleQuestion(data.text);
                else if(data.type === 'ANSWER') Host.handleAnswer(conn.peer, data.text);
                else if(data.type === 'JUDGE') Host.handleJudge(data.index);
            });
            conn.on('close', () => {
                delete Host.players[conn.peer];
                delete Host.conns[conn.peer];
                Host.updateLobby();
            });
        });
    },

    copyURL: () => {
        const copyText = document.getElementById("h-invite-url");
        copyText.select();
        copyText.setSelectionRange(0, 99999);
        navigator.clipboard.writeText(copyText.value).then(() => {
            alert("URLをコピーしました");
        });
    },

    updateLobby: () => {
        const ids = Object.keys(Host.players);
        document.getElementById('h-count').innerText = ids.length;
        const list = document.getElementById('h-player-list');
        list.innerHTML = ids.map(id => `<div class="player-chip">${Host.players[id].name}</div>`).join('');
        document.getElementById('h-btn-start').disabled = ids.length < 2;
    },

    broadcast: (data) => Object.values(Host.conns).forEach(c => c.send(data)),

    // 2. Game Start
    startGame: () => {
        if(!Host.apiKey) return alert("設定画面でAPIキーを入力してください");
        
        const ids = Object.keys(Host.players);
        if (ids.length < 2) return;

        Host.state.answers = [];
        const candidatesA = [...ids, "AI"];
        const bId = ids[Math.floor(Math.random() * ids.length)];
        let aId = bId;
        while(aId === bId) {
            aId = candidatesA[Math.floor(Math.random() * candidatesA.length)];
        }

        const isAI = (aId === "AI");
        const aName = isAI ? "AI" : Host.players[aId].name;
        const bName = Host.players[bId].name;

        Host.state.roleA = { id: aId, name: aName, isAI: isAI };
        Host.state.roleB = { id: bId, name: bName };

        // UI Update
        Host.hideAllHostScreens();
        document.getElementById('h-screen-game').classList.remove('hidden');
        
        document.getElementById('h-phase-title').innerText = "役割確認中";
        document.getElementById('h-game-content').innerHTML = `
            <p>ターゲット(A): <strong style="color:var(--accent); font-size:1.5em;">${aName}</strong></p>
            <p>質問者(B): <strong style="color:var(--accent); font-size:1.5em;">${bName}</strong></p>
            <p style="margin-top:20px; color:#888;">Bが質問を入力するのを待っています...</p>
        `;

        Host.broadcast({ type: 'ROLE_ASSIGN', roleA: Host.state.roleA, roleB: Host.state.roleB });
    },

    // 3. Question Phase
    handleQuestion: (text) => {
        Host.state.question = text;
        document.getElementById('h-phase-title').innerText = "回答フェーズ";
        document.getElementById('h-game-content').innerHTML = `
            <div style="color:#888;">質問</div>
            <div style="font-size:1.5em; font-weight:bold; margin-bottom:20px;">${text}</div>
            <div id="h-ans-status">回答を待っています...</div>
        `;
        Host.broadcast({ type: 'PHASE_ANSWER', question: text });
        Host.callAI(text); 
    },

    callAI: async (question) => {
        const isTargetAI = Host.state.roleA.isAI;
        // If A is AI -> Target Mode (AI Mode). If A is Human -> Impostor Mode (Human Mode).
        const mode = isTargetAI ? 'AI' : 'HUMAN';
        
        const ansText = await Host.generateAIResponse(Host.apiKey, mode, question);
        Host.state.answers.push({ id: "AI", text: ansText, isAI: true });
        Host.checkAllAnswers();
    },

    handleAnswer: (pid, text) => {
        Host.state.answers.push({ id: pid, text: text, isAI: false });
        document.getElementById('h-ans-status').innerText = `${Host.state.answers.length}人が回答済み`;
        Host.checkAllAnswers();
    },

    checkAllAnswers: () => {
        const totalPlayers = Object.keys(Host.players).length;
        const required = (totalPlayers - 1) + 1; // Clients - B + AI

        if (Host.state.answers.length >= required) {
            Utils.shuffle(Host.state.answers);
            
            document.getElementById('h-phase-title').innerText = "推理フェーズ";
            let html = `<p>Bが回答を選んでいます...</p><div style="text-align:left;">`;
            Host.state.answers.forEach(a => html += `<div class="answer-box">${a.text}</div>`);
            html += `</div>`;
            document.getElementById('h-game-content').innerHTML = html;

            Host.broadcast({ type: 'PHASE_JUDGE', answers: Host.state.answers });
        }
    },

    // 4. Result Phase
    handleJudge: (index) => {
        const selected = Host.state.answers[index];
        const isCorrect = (selected.id === Host.state.roleA.id);
        
        let html = isCorrect ? 
            `<h1 style="color:var(--success); font-size:3em;">正解！</h1>` : 
            `<h1 style="color:var(--danger); font-size:3em;">不正解...</h1>`;
        
        const author = selected.isAI ? "AI" : Host.players[selected.id].name;
        html += `<p>選んだ回答: <strong>${selected.text}</strong></p>`;
        html += `<p>この回答の主: <strong>${author}</strong></p>`;
        html += `<hr style="border-color:#444; margin:20px 0;"><h3>【内訳】</h3>`;
        
        Host.state.answers.forEach(a => {
            let name = a.isAI ? "AI" : Host.players[a.id].name;
            let mark = (a.id === Host.state.roleA.id) ? " <span style='color:var(--accent);'>(本物)</span>" : "";
            html += `<div style="border-bottom:1px solid #444; padding:5px;">${name}: ${a.text}${mark}</div>`;
        });

        html += `<button onclick="Host.resetGame()" style="margin-top:30px;">ロビーへ戻る</button>`;
        document.getElementById('h-game-content').innerHTML = html;
        Host.broadcast({ type: 'RESULT', success: isCorrect });
    },

    resetGame: () => {
        Host.goToLobby();
        Host.broadcast({ type: 'RESET' });
    }
};

/* ================= CLIENT LOGIC (MOBILE) ================= */
const Client = {
    id: null, name: null, selectedPt: null,
    init: (hid) => {
        // ID Persistence
        Client.id = sessionStorage.getItem('p_id') || 'p_' + Date.now() + Math.random().toString(36).substr(2,9); 
        sessionStorage.setItem('p_id', Client.id);
        Net.initPlayer(hid);
    },
    handleData: (data) => {
        if(data.type === 'SYNC') {
            // Client Reconnection Logic could go here
        }
        
        const msg = document.getElementById('c-status-msg');
        const game = document.getElementById('c-game-area');
        const submitBtn = document.getElementById('c-btn-submit');
        const judgeArea = document.getElementById('c-judge-area');
        const roleArea = document.getElementById('c-role-area');

        if (data.type === 'ROLE_ASSIGN') {
            roleArea.classList.remove('hidden');
            const myId = Net.peer.id;
            const isB = (myId === data.roleB.id);
            
            document.getElementById('c-role-text').innerText = isB ? "あなたは【質問者 B】" : "あなたは【回答者】";
            document.getElementById('c-instruction').innerText = isB ? 
                `A (${data.roleA.name}) への質問を考えてください` : 
                `A (${data.roleA.name}) になりすまして回答します`;
            
            // Set Input for B (Question)
            if (isB) {
                Client.toggleInput(true, "質問を入力", "質問を送信");
                Client.actionType = 'QUESTION';
                msg.innerText = "質問を入力してください";
            } else {
                Client.toggleInput(false);
                msg.innerText = "質問者が質問を考え中...";
            }
        }
        else if (data.type === 'PHASE_ANSWER') {
            if (Client.actionType === 'QUESTION') {
                // I am B -> Wait
                Client.toggleInput(false);
                msg.innerText = "みんなが回答しています...";
            } else {
                // I am Answerer
                Client.toggleInput(true, `質問: ${data.question}`, "回答を送信");
                Client.actionType = 'ANSWER';
                msg.innerText = "Aになりすまして回答してください";
            }
        }
        else if (data.type === 'PHASE_JUDGE') {
            Client.toggleInput(false);
            if (Client.actionType === 'QUESTION') {
                // I am B -> Show Judge Buttons
                msg.classList.add('hidden');
                judgeArea.classList.remove('hidden');
                const list = document.getElementById('c-judge-list');
                list.innerHTML = "";
                data.answers.forEach((ans, idx) => {
                    const btn = document.createElement('button');
                    btn.innerText = ans.text;
                    btn.style.marginBottom = "10px";
                    btn.style.background = "#444";
                    btn.onclick = () => {
                        Net.send({ type: 'JUDGE', index: idx });
                    };
                    list.appendChild(btn);
                });
            } else {
                msg.innerText = "質問者が推理中...";
            }
        }
        else if (data.type === 'RESULT') {
            judgeArea.classList.add('hidden');
            msg.classList.remove('hidden');
            msg.innerText = data.success ? "Bの正解！" : "不正解...";
        }
        else if (data.type === 'RESET') {
            roleArea.classList.add('hidden');
            judgeArea.classList.add('hidden');
            msg.classList.remove('hidden');
            Client.toggleInput(false);
            msg.innerText = "次のゲームを待機中...";
            Client.actionType = null;
        }
    },

    toggleInput: (enable, placeholder = "", btnText = "") => {
        const area = document.getElementById('c-game-area');
        const input = document.getElementById('c-input-text');
        const btn = document.getElementById('c-btn-submit');
        const label = document.getElementById('c-area-label');

        if(enable) {
            area.classList.remove('ui-disabled');
            input.value = "";
            input.placeholder = placeholder;
            label.innerText = placeholder;
            btn.innerText = btnText;
        } else {
            area.classList.add('ui-disabled');
        }
    },

    sendAction: () => {
        const text = document.getElementById('c-input-text').value;
        if(!text) return;
        
        if (Client.actionType === 'QUESTION') {
            Net.send({ type: 'QUESTION', text: text });
            Client.toggleInput(false);
            document.getElementById('c-status-msg').innerText = "回答を待っています...";
        } else if (Client.actionType === 'ANSWER') {
            Net.send({ type: 'ANSWER', text: text });
            Client.toggleInput(false);
            document.getElementById('c-status-msg').innerText = "他の回答を待っています...";
        }
    }
};

// Start Host Init (Loads Title Screen)
Host.init();
</script>
</body>
</html>
